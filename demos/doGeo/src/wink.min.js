wink={api:{},fx:{},math:{},net:{},ui:{layout:{},xy:{},xyz:{}},ux:{},byId:function(a){if(this.isString(a)){return document.getElementById(a)}else{return a}},translate:function(b,a){try{if(this.isset(a)){var d=a.i18n}else{var d=i18n}var f=d[b];if(this.isUndefined(f)){f=b}return f}catch(c){return b}},isUndefined:function(a){return(a===undefined)},isset:function(a){return((!this.isUndefined(a))&&(a!==null))},isCallback:function(a){return !!(a&&a.method)},isString:function(a){return(typeof a=="string"||a instanceof String)},isInteger:function(a){return(a.toString().search(/^-?[0-9]+$/)==0)},isArray:function(a){if(!this.isset(a)||a.constructor.toString().indexOf("Array")==-1){return false}else{return true}},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},bind:function(b,a){return function(){return b.apply(a,arguments)}},call:function(e,c){var b=window;var d=e.method;var a=c;if(this.isset(e.context)){b=e.context}else{if(this.isset(e.ctx)){b=e.ctx}}if(!this.isArray(a)||a.length==0){a=[a]}if(wink.isset(e.arguments)&&e.arguments.length>0){a=a.concat(e.arguments)}b[d].apply(b,a)},setTimeout:function(d,e,b){var a=Array.prototype.slice.call(arguments,3);var c=function(){d[e].apply(d,a)};return setTimeout(c,b)},setInterval:function(d,e,b){var a=Array.prototype.slice.call(arguments,3);var c=function(){d[e].apply(d,a)};return setInterval(c,b)},getUId:function(){return(new Date().getTime()-Math.ceil(Math.random()*1000))}};if(wink.isUndefined(window._)){_=wink.bind(wink.translate,wink)}if(wink.isUndefined(window.$)){$=wink.bind(wink.byId,wink)}wink.net.Xhr=function(a){this.uId=wink.getUId();this.request={xhrObject:null,params:a};this._create()};wink.net.Xhr.prototype={sendData:function(b,m,a,f,d){var j=this;a=a.toUpperCase();if(this.request.xhrObject){if(a=="GET"){if(wink.isset(m)){if(!wink.isArray(m)){wink.log("[Xhr] parameters must be in an array of objects containing the parameter name and value")}else{var g=m.length;for(var h=0;h<g;h++){if(h==0){b+="?"+encodeURIComponent(m[h].name)+"="+encodeURIComponent(m[h].value)}else{b+="&"+encodeURIComponent(m[h].name)+"="+encodeURIComponent(m[h].value)}}}}try{this.request.xhrObject.open("GET",b);this.request.xhrObject.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8;");this.request.xhrObject.send(null)}catch(k){return false}}else{if(a=="POST"){var c="";if(wink.isset(m)){if(!wink.isArray(m)){wink.log("[Xhr] parameters must be in an array of objects containing the parameter name and value")}else{var g=m.length;for(var h=0;h<g;h++){if(h==0){c+=encodeURIComponent(m[h].name)+"="+encodeURIComponent(m[h].value)}else{c+="&"+encodeURIComponent(m[h].name)+"="+encodeURIComponent(m[h].value)}}}}try{this.request.xhrObject.open("POST",b,true);this.request.xhrObject.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8;");this.request.xhrObject.send(c)}catch(k){return false}}}this.request.xhrObject.onreadystatechange=function(){if(j.request.xhrObject.readyState==4&&!(j.request.xhrObject.status>=200&&j.request.xhrObject.status<400)){if(wink.isset(d)){wink.call(d,j.request)}}if(j.request.xhrObject.readyState==4&&(j.request.xhrObject.status>=200&&j.request.xhrObject.status<400)){if(wink.isset(f)){wink.call(f,j.request)}}}}else{return false}return true},_create:function(){if(window.XMLHttpRequest){try{this.request.xhrObject=new XMLHttpRequest()}catch(a){this.request.xhrObject=false}}else{wink.log("[Xhr] XHR not supported")}}};wink.Xhr=wink.net.Xhr;wink.fx={addClass:function(c,b){var a=c.className;if((" "+a+" ").indexOf(" "+b+" ")<0){c.className=a+(a?" ":"")+b}},removeClass:function(c,b){var a=wink.trim((" "+c.className+" ").replace(" "+b+" "," "));if(c.className!=a){c.className=a}},applyTransition:function(c,d,e,a,b){c.style.webkitTransitionProperty=d;c.style.webkitTransitionDuration=e;c.style.webkitTransitionDelay=a;c.style.webkitTransitionTimingFunction=b},applyTransformTransition:function(c,d,a,b){this.applyTransition(c,"-webkit-transform",d,a,b)},getTransformPosition:function(f){var a={x:null,y:null};var d=this.getTransform(f);if(wink.ua.isAndroid==true){var e=new RegExp(/matrix/i);if(e.test(d)){var e=new RegExp("[, ()]+","g");var c=d.split(e);if(c.length>6&&c[0]=="matrix"){a.x=c[5];a.y=c[6]}}}else{var b=new WebKitCSSMatrix(d);a.x=b.m41;a.y=b.m42}return a},applyTranslate:function(b,a,c){if(wink.isUndefined(b._cssTransform)){b._cssTransform={translate:this._getTranslateTransform(0,0,0),scale:this._getScaleTransform(1,1),rotate:this._getRotateTransform(0)}}b._cssTransform.translate=this._getTranslateTransform(a,c);this.setTransform(b,b._cssTransform.translate+" "+b._cssTransform.scale+" "+b._cssTransform.rotate)},applyScale:function(b,a,c){if(wink.isUndefined(b._cssTransform)){b._cssTransform={translate:this._getTranslateTransform(0,0,0),scale:this._getScaleTransform(1,1),rotate:this._getRotateTransform(0)}}b._cssTransform.scale=this._getScaleTransform(a,c);this.setTransform(b,b._cssTransform.translate+" "+b._cssTransform.scale+" "+b._cssTransform.rotate)},applyRotate:function(a,b){if(wink.isUndefined(a._cssTransform)){a._cssTransform={translate:this._getTranslateTransform(0,0,0),scale:this._getScaleTransform(1,1),rotate:this._getRotateTransform(0)}}a._cssTransform.rotate=this._getRotateTransform(b);this.setTransform(a,a._cssTransform.translate+" "+a._cssTransform.scale+" "+a._cssTransform.rotate)},getTransform:function(a){return window.getComputedStyle(a).webkitTransform},setTransform:function(b,a){b.style.webkitTransform=a},_getTranslateTransform:function(a,g){var b="";var e=a;if(!wink.isset(e)){e=0}var d=g;if(!wink.isset(d)){d=0}var c="0";var f=false;f=f||(wink.isString(e)&&(e.indexOf("%",0)!=-1));f=f||(wink.isString(d)&&(d.indexOf("%",0)!=-1));if(!f){e=e+"px";d=d+"px";c=c+"px"}if(wink.ua.isAndroid==true){b="translate("+e+", "+d+")"}else{b="translate3d("+e+", "+d+", "+c+")"}return b},_getScaleTransform:function(a,e){var b="";var d=a;if(!wink.isset(d)){d=1}var c=e;if(!wink.isset(c)){c=1}b="scale("+d+", "+c+")";return b},_getRotateTransform:function(c){var b="";var a=c;if(!wink.isset(a)){a=0}b="rotate("+a+"deg)";return b}};wink.addClass=wink.bind(wink.fx.addClass,wink.fx);wink.removeClass=wink.bind(wink.fx.removeClass,wink.fx);HTMLElement.prototype.winkGetTopPosition=function(a){var c=0;var b=this;if(wink.isset(a)){while(b&&b!=a){c+=b.offsetTop;b=b.offsetParent}}else{while(b){c+=b.offsetTop;b=b.offsetParent}}return c};HTMLElement.prototype.winkGetLeftPosition=function(a){var c=0;var b=this;if(wink.isset(a)){while(b&&b!=a){c+=b.offsetLeft;b=b.offsetParent}}else{while(b){c+=b.offsetLeft;b=b.offsetParent}}return c};HTMLElement.prototype.winkTranslate=function(a,b){wink.fx.applyTranslate(this,a,b)};HTMLElement.prototype.winkScale=function(a,b){wink.fx.applyScale(this,a,b)};HTMLElement.prototype.winkRotate=function(a){wink.fx.applyRotate(this,a)};HTMLElement.prototype.winkListenToGesture=function(b,c,a){wink.ux.gesture.listenTo(this,b,c,a)};HTMLElement.prototype.winkUnlistenToGesture=function(a,b){wink.ux.gesture.unlistenTo(this,a,b)};if(wink.isUndefined(HTMLElement.prototype.getTopPosition)){HTMLElement.prototype.getTopPosition=HTMLElement.prototype.winkGetTopPosition}if(wink.isUndefined(HTMLElement.prototype.getLeftPosition)){HTMLElement.prototype.getLeftPosition=HTMLElement.prototype.winkGetLeftPosition}if(wink.isUndefined(HTMLElement.prototype.rotate)){HTMLElement.prototype.rotate=HTMLElement.prototype.winkRotate}if(wink.isUndefined(HTMLElement.prototype.scale)){HTMLElement.prototype.scale=HTMLElement.prototype.winkScale}if(wink.isUndefined(HTMLElement.prototype.translate)){HTMLElement.prototype.translate=HTMLElement.prototype.winkTranslate}if(wink.isUndefined(HTMLElement.prototype.listenToGesture)){HTMLElement.prototype.listenToGesture=HTMLElement.prototype.winkListenToGesture}if(wink.isUndefined(HTMLElement.prototype.unlistenToGesture)){HTMLElement.prototype.unlistenToGesture=HTMLElement.prototype.winkUnlistenToGesture}wink.error={logLevel:0,log:function(a){if(this.logLevel==1){if(console!=undefined){console.log(a)}else{alert(a)}}}};wink.log=wink.bind(wink.error.log,wink.error);wink.topics={_subscribed_topics:[],subscribe:function(a,c){if(!wink.isCallback(c)){wink.log("[topics] invalid callback argument");return}var b=[a.toLowerCase(),c];this._subscribed_topics.push(b)},unsubscribe:function(a,c){for(var b=0;b<this._subscribed_topics.length;b++){if(this._subscribed_topics[b][0]==a.toLowerCase()&&this._subscribed_topics[b][1].method==c.method&&this._subscribed_topics[b][1].context==c.context){this._subscribed_topics.splice(b,1)}}},publish:function(a,b){this._dispatch(a.toLowerCase(),b)},_dispatch:function(b,d){var a=this._subscribed_topics.length;for(var c=0;c<a;c++){if(this._subscribed_topics[c]&&this._subscribed_topics[c][0]==b){if(wink.isset(this._subscribed_topics[c][1])){wink.call(this._subscribed_topics[c][1],d)}}}}};wink.publish=wink.bind(wink.topics.publish,wink.topics);wink.subscribe=wink.bind(wink.topics.subscribe,wink.topics);wink.unsubscribe=wink.bind(wink.topics.unsubscribe,wink.topics);wink.json={parse:function(str){if(wink.isset(window.JSON)&&wink.isset(window.JSON.parse)){return window.JSON.parse(str)}else{var JSON=!(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(str.replace(/"(\\.|[^"\\])*"/g,"")))&&eval("("+str+")");return JSON}},concat:function(c,b){for(var a in b){c[a]=b[a]}}};wink.parseJSON=wink.bind(wink.json.parse,wink.json);wink.ui.xy.layer={visible:false,color:"#000",opacity:0.3,zIndex:998,_container:null,_sublayer:null,_added:false,show:function(){if(!this._added){this._initDom()}if(!this.visible){this._sublayer.style.height=document.body.scrollHeight+"px";this._container.style.display="block";this.visible=true}},hide:function(){if(this._added&&this.visible){this._container.style.display="none";this.visible=false}},refresh:function(){if(this._added&&this.visible){this._sublayer.style.height=document.body.scrollHeight+"px"}},update:function(){if(!this._added){this._initDom()}this._container.style.zIndex=this.zIndex;this._sublayer.style.backgroundColor=this.color;this._sublayer.style.opacity=this.opacity},_initDom:function(){this._container=document.createElement("div");this._container.style.position="absolute";this._container.style.display="none";this._container.style.top=0;this._container.style.width="100%";this._container.style.zIndex=this.zIndex;this._container.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";this._container.onclick=function(){if(wink.isset(wink.ui.xy.layer.onclick)){wink.ui.xy.layer.onclick()}};this._sublayer=document.createElement("div");this._sublayer.style.width="100%";this._sublayer.style.backgroundColor=this.color;this._sublayer.style.opacity=this.opacity;this._container.appendChild(this._sublayer);document.body.appendChild(this._container);this._added=true}};wink.layer=wink.ui.xy.layer;wink.math={round:function(c,b){if(!wink.isset(b)){b=0}var a=Math.pow(10,b);return Math.round(c*a)/a}};wink.ua={isWebkit:false,isMobile:false,isIPhone:false,isIPod:false,isIPad:false,isAndroid:false,isSafari:false,isMozilla:false,webkitVersion:0,webkitMinorVersion:0,webkitUpdateVersion:0,browserVersion:0,browserMinorVersion:0,browserUpdateVersion:0,osVersion:0,osMinorVersion:0,osUpdateVersion:0,supportGradient:false,getTouchStartEvent:function(){if(this.isMobile==true){return"touchstart"}else{return"mousedown"}},getTouchMoveEvent:function(){if(this.isMobile==true){return"touchmove"}else{return"mousemove"}},getTouchEndEvent:function(){if(this.isMobile==true){return"touchend"}else{return"mouseup"}},_updatePlatformInfo:function(){this.isWebkit=RegExp(" AppleWebKit/").test(navigator.userAgent);if(wink.isset(navigator)&&wink.isset(navigator.platform)){var c=new RegExp(/iphone/i);if(c.test(navigator.platform)){this.isIPhone=true}c=new RegExp(/ipod/i);if(c.test(navigator.platform)){this.isIPod=true}c=new RegExp(/ipad/i);if(c.test(navigator.platform)){this.isIPad=true}}if(wink.isset(navigator)&&wink.isset(navigator.appVersion)){var c=new RegExp(/android/i);if(c.test(navigator.appVersion)){this.isAndroid=true}var c=new RegExp(/safari/i);if(c.test(navigator.appVersion)){this.isSafari=true;var b=this._extractVersion(navigator.appVersion,"( Version/)([^ ]+)",".");this.browserVersion=b.major;this.browserMinorVersion=b.minor;this.browserUpdateVersion=b.update}}if(this.isSafari==false){this.isMozilla=RegExp(/mozilla/i).test(navigator.userAgent)}this.isMobile=this.isIPhone||this.isIPod||this.isAndroid||RegExp(" Mobile/").test(navigator.userAgent);if(this.isWebkit){var b=this._extractVersion(navigator.userAgent,"( AppleWebKit/)([^ ]+)",".");this.webkitVersion=b.major;this.webkitMinorVersion=b.minor;this.webkitUpdateVersion=b.update;this.supportGradient=(this.webkitVersion>=528)}if(this.isMobile&&wink.isset(navigator)&&wink.isset(navigator.appVersion)){if(this.isAndroid){var a=this._extractVersion(navigator.appVersion,"( Android )([^ ]+)",".");this.osVersion=a.major;this.osMinorVersion=a.minor;this.osUpdateVersion=a.update}else{var a=this._extractVersion(navigator.appVersion,"( OS )([^ ]+)","_");this.osVersion=a.major;this.osMinorVersion=a.minor;this.osUpdateVersion=a.update}}return this},_extractVersion:function(h,e,g){var b={major:0,minor:0,update:0};var a=RegExp(e).exec(h);if(wink.isset(a)&&a.length>1){var d=a[2];var f=RegExp("[^\\"+g+"0-9]").exec(d);if(wink.isset(f)){d=d.slice(0,f.index)}var c=d.split(g);if(c.length>0){b.major=c[0]}if(c.length>1){b.minor=c[1]}if(c.length>2){b.update=c[2]}}return b}}._updatePlatformInfo();wink.ux.touch={_touchElements:[],_START_EVENT:"start",_MOVE_EVENT:"move",_END_EVENT:"end",_GESTURE_START_EVENT:"gesturestart",_GESTURE_CHANGE_EVENT:"gesturechange",_GESTURE_END_EVENT:"gestureend",_EVENT_MAP:{start:wink.ua.getTouchStartEvent(),move:wink.ua.getTouchMoveEvent(),end:wink.ua.getTouchEndEvent(),gesturestart:"gesturestart",gesturechange:"gesturechange",gestureend:"gestureend"},addListener:function(e,a,m,h,d,k){if(wink.isUndefined(this._EVENT_MAP[a])){wink.log("[touch] Cannot add listener for unknown eventType: "+a);return false}var l=null;var g=this._getTouchElementIndex(e);if(g==null){var c=true;if(d===false){c=false}var i={domNode:e,tracking:c};l=new wink.ux.touch.Element(i);this._touchElements.push(l)}else{l=this._touchElements[g]}if(!l.isListening(a)){var b=false;if(a==this._START_EVENT){b=true;if(k===false){b=false}}var f=this;l.handle=function(n){f._handleEvent(n,l)};l.domNode.addEventListener(this._EVENT_MAP[a],l.handle,b)}var j=false;if(h===true){j=true}l.addEventCallback(a,m,j)},removeListener:function(e,d,f){var c=this._getTouchElementIndex(e);if(c!=null){var b=this._touchElements[c];b.removeEventCallback(d,f);var a=false;if(d==this._START_EVENT){a=true}if(!b.isListening(d)){b.domNode.removeEventListener(this._EVENT_MAP[d],b.handle,a)}}},getTouchProperties:function(b){var a={};a.x=b.pageX;a.y=b.pageY;a.target=b.target;return a},_getTouchElementIndex:function(c){for(var a=0;a<this._touchElements.length;a++){var b=this._touchElements[a];if(b.domNode==c){return a}}return null},_handleEvent:function(d,a){var c=this._getEventType(d.type);if(c==null){return}var b=this._createUxEvent(c,d);if(b.isPublished(a.domNode)){return}if(!a.isListening(this._START_EVENT)||a.tracking==false){a.tracked=true}else{if(c==this._START_EVENT){a.tracked=true}}if(a.tracked==true){if(c==this._END_EVENT){a.tracked=false}a.notifyEvent(b)}},_createUxEvent:function(c,f){var a={};a.type=c;a.srcEvent=f;a.timestamp=f.timeStamp;a.multitouch=false;if(!a.timestamp){a.timestamp=new Date().getTime()}if(wink.ua.isMobile==true){if(c==this._GESTURE_START_EVENT||c==this._GESTURE_CHANGE_EVENT||c==this._GESTURE_END_EVENT){a.target=f.target;a.x=0;a.y=0}else{var d=null;if(c==this._END_EVENT){if(f.changedTouches&&f.changedTouches.length>0){d=f.changedTouches[0]}}else{if(f.targetTouches&&f.targetTouches.length>0){d=f.targetTouches[0]}else{if(f.changedTouches&&f.changedTouches.length>0){d=f.changedTouches[0]}}}if(d!=null){var b=this.getTouchProperties(d);a.x=b.x;a.y=b.y;a.target=b.target;if(f.touches&&f.touches.length>1){a.multitouch=true}}}}else{var b=this.getTouchProperties(f);a.x=b.x;a.y=b.y;a.target=b.target}return new wink.ux.Event(a)},_getEventType:function(b){for(type in this._EVENT_MAP){var a=this._EVENT_MAP[type];if(a==b){return type}}return null}};wink.ux.touch.Element=function(a){this.uId=wink.getUId();this.domNode=a.domNode;this.tracking=a.tracking;this.tracked=false;this._eventListened=[];if(this._validateProperties()===false){return}};wink.ux.touch.Element.prototype={addEventCallback:function(b,i,g){if(!wink.isCallback(i)){wink.log("[touch.Element] Invalid callback");return false}var h=this._getListenedEvent(b);if(h==null){h={type:b,preventDefault:g,callbacks:[]};this._eventListened.push(h)}else{var f=h.callbacks;for(var d=0;d<f.length;d++){var e=f[d];var c=e.context;var a=e.method;if(i.context==e.context&&i.method==e.method){return false}}}h.callbacks.push(i);return true},removeEventCallback:function(d,h){if(!wink.isCallback(h)){wink.log("[touch.Element] Invalid callback");return false}var g=this._getListenedEvent(d);if(g==null){return false}var e=g.callbacks;for(var b=0;b<e.length;b++){var a=e[b];var c=a.context;var f=a.method;if(h.context==a.context&&h.method==a.method){g.callbacks.splice(b,1);break}}return true},isListening:function(a){var b=this._getListenedEvent(a);if(b!=null&&b.callbacks.length>0){return true}return false},notifyEvent:function(d){var g=this._getListenedEvent(d.type);if(g!=null){if(g.preventDefault==true){d.preventDefault()}var e=g.callbacks;for(var c=0;c<e.length;c++){var b=e[c];var f=b.arguments;var a=[d];if(wink.isset(f)&&f.length>0){a=a.concat(f)}wink.call(b,a)}}d.setPublished(true,this.domNode)},_getListenedEvent:function(c){for(var b=0;b<this._eventListened.length;b++){var a=this._eventListened[b];var d=a.type;if(d==c){return a}}return null},_validateProperties:function(){if(!wink.isset(this.domNode)||this.domNode==""){wink.log("[touch.Element] domNode must be specified");return false}}};wink.ux.Event=function(a){this.uId=wink.getUId();this.type=a.type;this.x=a.x;this.y=a.y;this.timestamp=a.timestamp;this.target=a.target;this.srcEvent=a.srcEvent;this.multitouch=a.multitouch;if(wink.isUndefined(this.srcEvent._publishedNodes)){this.srcEvent._publishedNodes=[]}if(this._validateProperties()===false){return}};wink.ux.Event.prototype={isPublished:function(b){if(this.srcEvent._publishedNodes.length==0){return false}var a=this._getPublishedNodeIndex(b);return this.srcEvent._publishedNodes[a].state},setPublished:function(d,b){var a=this._getPublishedNodeIndex(b);var c=false;if(d===true){c=true}this.srcEvent._publishedNodes[a].state=c},preventDefault:function(){this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},dispatch:function(c,b){var d=this.srcEvent.type;if(wink.isset(b)){d=b}var a=this._cloneEventAs(d);a._publishedNodes=this.srcEvent._publishedNodes;c.dispatchEvent(a)},_cloneEventAs:function(b){var a=null;if(wink.ua.isMobile==true){a=this._createEventWithTouch(this.srcEvent,b)}else{a=this._createEventWithMouse(this.srcEvent,b)}return a},_getPublishedNodeIndex:function(b){for(var a=0;a<this.srcEvent._publishedNodes.length;a++){var d=this.srcEvent._publishedNodes[a];var c=d.node;if(b==c){return a}}this.srcEvent._publishedNodes.push({node:b,state:false});return(this.srcEvent._publishedNodes.length-1)},_createEventWithTouch:function(a,c){var b=a;var d=document.createEvent("TouchEvent");d.initTouchEvent(c,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.touches,b.targetTouches,b.changedTouches,b.scale,b.rotation);if(wink.ua.isAndroid==true){d.initUIEvent(c,b.bubbles,b.cancelable,window,b.detail)}return d},_createEventWithMouse:function(a,c){var b=a;var d=document.createEvent("MouseEvent");d.initMouseEvent(c,b.bubbles,b.cancelable,document.defaultView,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.metaKey,b.button,b.relatedTarget);return d},_validateProperties:function(){if(!wink.isset(this.type)||this.type==""){wink.log("[Event] type must be specified");return false}if(wink.isUndefined(this.x)){wink.log("[Event] x must be specified");return false}if(wink.isUndefined(this.y)){wink.log("[Event] y must be specified");return false}if(!wink.isset(this.timestamp)){wink.log("[Event] timestamp must be specified");return false}if(wink.isUndefined(this.target)){wink.log("[Event] target must be specified");return false}if(!wink.isset(this.srcEvent)){wink.log("[Event] srcEvent must be specified");return false}}};