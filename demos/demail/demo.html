<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
	"http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
	<title>Dojo Mail</title>
	<style type="text/css">
		@import "../../dojo/resources/dojo.css";
		@import "../../dijit/themes/tundra/tundra.css";
		@import "../../dijit/tests/css/dijitTests.css";
		@import "../../dojox/grid/resources/tundraGrid.css";

		html, body, #main{	
			width: 100%;	/* make the body expand to fill the visible window */
			height: 100%;
			overflow: hidden;	/* erase window level scrollbars */
			padding: 0;
			margin: 0;
		}

		.app .leftTree {
			/* make it use mac-like fonts */
			/* font-family: "Myriad Pro", Myriad, Geneva, sans-serif; */
			padding: 0 0 0 5px;
			background-color: #d6dde5;
			width: 200px;
		}

		.tundra .app .subNode {
			/* clobber the lines */
			background-image: none;
			/* set the individual items to be left-aligned */
			margin-left: 0px;
		}

		/* rules to set up the visual hierarchy */

		.app .subNode .subNode .subNode .dijitTreeRow {
			padding-left: 18px;
		}

		.app .subNode .subNode .subNode .subNode .dijitTreeRow {
			padding-left: 36px;
		}

		.app .subNode .subNode .subNode .subNode .subNode .dijitTreeRow {
			padding-left: 48px;
		}

		.app .subNode .subNode .subNode .subNode .subNode .subNode .dijitTreeRow {
			padding-left: 60px;
		}

		.app .subNode .subNode .subNode .subNode .subNode .subNode .subNode .dijitTreeRow {
			padding-left: 72px;
		}

		/* make the open/close buttons smaller */

		.app .dijitTreeExpando {
			width: 14px;
			height: 10px;
		}
		
		.app .dijitTreeExpandoClosed {
			background: url("resources/arrow-closed.png") no-repeat;
		}
		
		.app .dijitTreeExpandoOpened {
			background: url("resources/arrow-open.png") no-repeat;
		}

		.app .subNode .subNodeDetail {
			height: 14px;
			color: white;
			background-color: #8b9ab8;
			background-color: #8799bd;
			float: right;
			-webkit-border-radius: 7px;
			-moz-border-radius: 7px;
			padding: 1px 5px 0px 5px;
			margin-right: 4px;
			font-weight: bold;
			font-size: 10px;
			min-width: 8px;
			text-align: center;
		}

		.app .dijitTreeIsRoot .subNode .dijitTreeExpando {
			/* clobber the lines */
			/*
			background-image: none;
			*/
		}

		/* hide parts of the tree node that we don't want to see for top-level items */
		.app .dijitTreeIsRoot > .dijitTreeRow .dijitTreeIcon,
		.app .dijitTreeIsRoot > .dijitTreeRow .dijitTreeExpando,
		.app .dijitTreeIsRoot > .dijitTreeRow .subNodeDetail
		{
			display: none;
		}
		.app .dijitTreeIsRoot > .dijitTreeRow {
			color: #606e8e;
			font-weight: bold;
			font-family: "Helvetica Neue", Helvetica, Verdana;
			padding-left: 5px;
			/*
			border: 1px solid black;
			*/
		}

		.app .dijitSplitterV {
			width: 0px;
			border-left: 1px solid #8b8b8b; 
			/* #555555; */
			
		}
		.app .dijitSplitterV .dijitSplitterThumb {
			display: none;
		}

		.app .dijitSplitterH {
			height: 7px;
			border-top: 0.6px solid #a5a5a5;
			border-bottom: 0.6px solid #a5a5a5;
			background: -webkit-gradient(linear, left top, left bottom, from(#fcfcfc), to(#dfdfdf));
			-webkit-background-origin: border;
			-webkit-background-clip: border;
		}

		.app .dijitTreeRow {
			padding-top: 2px;
			border-top: none;
			height: 16px;
		}

		.app .dijitTreeNodeSelected {
			outline: none;
			border: none;

			/** dark gradient bg **/
			/*
			border-top: 1px solid #67788c;
			background: #9499b0;
			color: white;
			background: -webkit-gradient(linear, left top, left bottom, from(#8092a5), to(#415a73));
			-webkit-background-origin: border;
			-webkit-background-clip: border;
			*/

			/** the lighter version **/
			border-top: 1px solid #9499b0;
			background: #9499b0;
			color: white;
			background: -webkit-gradient(linear, left top, left bottom, from(#a7b5c2), to(#8091a3));
			-webkit-background-origin: border;
			-webkit-background-clip: border;
			/*
			background-color: #8091a3;
			*/

		}

		.app .dijitTreeIsRoot > .dijitTreeRow {
			background: none;
		}

		.app .dijitTreeIsRoot > .dijitTreeRow .dijitTreeNodeSelected {
			border-top: 1px solid transparent;
			background: none;
		}

		.app .dijitTreeNodeSelected .subNodeDetail {
			color: #8b9ab8;
			background-color: white;
		}

		.app .dijitTreeLabel {
			/*	clobber the text outline since we give visual indication 
				with a background 
			*/
			outline: none;
		}

		.app .dijitTreeNodeSelected .dijitTreeLabel {
			background-color: transparent;
		}

		.app .dijitTreeExpandoLeaf {
			background: none;
		}

		.app .dojoxGridRowOdd {
			background-color: #f1f5fa;
		}

		.app .dojoxGridCell {
			font-family: "Helvetica Neue", Helvetica, Verdana;
			font-size: 11px;
			border-bottom: none;
			border-right: 1px solid #dadada;
		}

		.app .dojoxGridHeader .dojoxGridCell {
			border-bottom: 1px solid #575757;
			background: -webkit-gradient(linear, left top, left bottom, from(#dbdbdb), to(#bbbbbb), color-stop(0.4, #dbdbdb));
			-webkit-background-origin: border;
			-webkit-background-clip: border;
		}

		.app .dojoxGridCellFocus.dojoxGridCellOver,
		.app .dojoxGridCellFocus {
			outline: none;
			border: none;
			border-right: 1px solid #dadada;
			border-left: 1px solid transparent;
		}


		/*
		.app .dojoxGridRowSelected,
		.app .dojoxGridRowSelected.dojoxGridRowOver .dojoxGridCell {
		*/
		.app .dojoxGridCellFocus {
			border-right: 1px solid #dadada;
			background-color: #3580e0;
			color: white;
		}

		.app .dojoxGridRowOver .dojoxGridCell {
			color: black;
			background-color: transparent;
		}
		.app .dojoxGridCellOver {
			border-left: 1px solid transparent;
			border-top: 1px solid transparent;
		}


	</style>
	<script type="text/javascript">
		djConfig = {
			parseOnLoad: true,
			modulePaths: {
				"acme": "../demos/demail"
			}
		};
	</script>
	<script type="text/javascript" src="../../dojo/dojo.js"></script>
	<script type="text/javascript" src="src.js"></script>
	<script type="text/javascript">

		var csvStore = new dojox.data.CsvStore({
			url: dojo.moduleUrl("dojox", "charting/tests/data/msft_prices.csv")
		});

		var d = { 
			identifier: 'name',
			label: 'name',
			items: [
				{ 
					name:'Africa', 
					type:'continent', 
					population:'900 million', 
					area: '30,221,532 sq km',
					timezone: '-1 UTC to +4 UTC',
					children:[
						{_reference:'Egypt'}, 
						{_reference:'Kenya'}, 
						{_reference:'Sudan'}
					]
				},
				{ name:'Egypt', type:'country' },
				{ name:'Kenya', type:'country',
					children: [
						{_reference:'Nairobi'}, 
						{_reference:'Mombasa'}
					]
				},
				{ name:'Nairobi', type:'city' },
				{ name:'Mombasa', type:'city' },
				{ name:'Sudan', type:'country', children:[ { _reference:'Khartoum' } ] },
				{ name:'Khartoum', type:'city' },
				{ name:'Asia', type:'continent',
					children: [
						{ _reference: 'China' }, 
						{ _reference: 'India' }, 
						{ _reference: 'Russia' }, 
					]
				},
				{ name:'China', type:'country' },
				{ name:'India', type:'country' },
				{ name:'Russia', type:'country' }
			]
		};
		for(var x = 0; x < 1000; x++){
			d.items.push({ type: "country", name: "country"+x });
			d.items[7].children.push({ _reference: "country"+x });
		}

		/*
		formatPrice = function(ind, attr){
			console.debug(arguments);
			return "$ "+val;
		}
		*/


		var folders = new dojo.data.ItemFileReadStore({ data: d });

		var folderModel =  new dijit.tree.ForestStoreModel({
			store: folders, 
			query: { type: "continent" },
			childrenAttrs: [ "children" ]
		});

		dojo.declare("acme._TreeNode", [ dijit._TreeNode ], {
			detail: "",
			detailNode: null,
			_onNodeFocus: function(){
				// console.debug(this.domNode);
				this.inherited(arguments);
			},
			_setDetail: function(v){
				this._detailNode.innerHTML = v;
			},
			templatePath: dojo.moduleUrl("acme", "newTreeNode.html")
		});

		dijit.defaultDuration = 150;

		dojo.extend(dijit.Tree, {
			templatePath: dojo.moduleUrl("acme", "newTree.html"),
			_createTreeNode: function(args){
				if(args.label){
					args.detail = ""+args.label.length;
				}
				return new acme._TreeNode(args);
			},

			// fixes for incorrect design tree widget design decisions
			_onTreeFocus: function(/*dijit._TreeNode*/ node){
				if(!node){ return; }
				if(node != this.lastFocused){
					this.blurNode();
				}
				node.onFocus();
				this.lastFocused = node;
			},

			blurNode: function(){
				var node = this.lastFocused;
				if(!node){ return; }
				node.onBlur();
				this.lastFocused = null;
			}

		});
	</script>
</head>
<body class="tundra">
	<div dojoType="dijit.layout.BorderContainer" design="sidebar" id="main" class="app">
		<div dojoType="dijit.layout.ContentPane" 
			class="leftTree"
			region="leading" 
			jsId="leading"
			splitter="true">
			<!--
			<div id="treeContainer"></div>
			-->
			<div dojoType="dijit.Tree"
				model="folderModel" openOnClick="true"
				showRoot="false"></div>
		</div>
		<table dojoType="dojox.grid.DataGrid"
			store="csvStore" query="{ Date: '*' }"
			splitter="true" height="auto"
			region="center" jsId="csvGrid">
			<script type="dojo/method" event="onCellContextMenu">
				return true; // allow context menus
			</script>
			<thead>
				<tr>
					<th width="20%">Date</th>
					<th width="auto">Open</th>
					<th>Close</th>
				</tr>
			</thead>
		</table>
		<div dojoType="dijit.layout.ContentPane" region="bottom" 
			style="height: 100px;" splitter="true">
			bottom bar
		</div>
		<!--
		<div dojoType="dijit.layout.ContentPane" region="trailing">
			right side-bar
		</div>
		-->
	</div>

	<div dojoType="dijit.Menu" jsId="rightClick" style="display: none;">
		<script type="dojo/method">
			this.bindDomNode(csvGrid.domNode);
		</script>
		<script type="dojo/connect" event="onOpen" args="evt">
			for(var x in evt){
				// console.debug(x);
			}
		</script>
		<div dojoType="dijit.MenuItem" onClick="alert('Hello world');">Enabled Item</div>
		<div dojoType="dijit.MenuItem" disabled="true">Disabled Item</div>
		<div dojoType="dijit.MenuSeparator"></div>
		<div dojoType="dijit.PopupMenuItem">
			<span>Enabled Submenu</span>
			<div dojoType="dijit.Menu" id="submenu2">
				<div dojoType="dijit.MenuItem" onClick="alert('Submenu 1!')">Submenu Item One</div>
				<div dojoType="dijit.MenuItem" onClick="alert('Submenu 2!')">Submenu Item Two</div>
				<div dojoType="dijit.PopupMenuItem">
					<span>Deeper Submenu</span>
					<div dojoType="dijit.Menu" id="submenu4">
						<div dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 1!')">Sub-sub-menu Item One</div>
						<div dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 2!')">Sub-sub-menu Item Two</div>
					</div>
				</div>
			</div>
		</div>
		<div dojoType="dijit.PopupMenuItem" disabled="true">
			<span>Disabled Submenu</span>
			<div dojoType="dijit.Menu" id="submenu3" style="display: none;">
				<div dojoType="dijit.MenuItem" onClick="alert('Submenu 1!')">Submenu Item One</div>
				<div dojoType="dijit.MenuItem" onClick="alert('Submenu 2!')">Submenu Item Two</div>
			</div>
		</div>
		<div dojoType="dijit.CheckedMenuItem" checked="true" onChange="alert('Now set to ' + arguments[0])">Checked</div>
		<div dojoType="dijit.CheckedMenuItem">Not Checked</div>
		<div dojoType="dijit.CheckedMenuItem" checked="true" disabled="true">Checked Disabled</div>
	</div>
</body>
</html>
