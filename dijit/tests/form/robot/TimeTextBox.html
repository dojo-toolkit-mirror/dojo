<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>doh.robot TimeTextBox Test</title>

		<style>
			@import "../../../../util/doh/robot/robot.css";
		</style>

		<!-- required: dojo.js -->
		<script type="text/javascript" src="../../../../dojo/dojo.js"
			djConfig="isDebug: true, parseOnLoad: true"></script>
		<script type="text/javascript" src="../../helpers.js"></script>

		<script type="text/javascript">
			dojo.require("dijit.robotx");
			dojo.require("dojo.date.stamp");

			dojo.addOnLoad(function(){
				doh.robot.initRobot('../test_TimeTextBox.html');

				doh.register("partial input", {
					name: "partial input",
					timeout: 60000,
					setUp: function(){
						// clear the field
						var w = dijit.byId('q2');
						w.attr('value', null, false);
					},
					runTest: function(){
						var d = new doh.Deferred(),
							w = dijit.byId('q2');

						// focus field, thus opening drop down		
						w.focus();

						// close drop down
						doh.robot.keyPress(dojo.keys.ESCAPE, 1500, {});
						
						// do partial input
						doh.robot.typeKeys('12:', 1000, 600);
						doh.robot.sequence(d.getTestCallback(dojo.hitch(this, function(){
							doh.f(w.isValid(), 'fully invalid');
							doh.t(w._isValidSubset(), 'partially valid');
							doh.f(this.state == "Error", 'no error shown');
							w.attr('value', dojo.date.stamp.fromISOString('T12:34:00'));
							console.log("at end of sequence");
						})), 500);
						return d;
					}
				});

				doh.run();
			});
		</script>
	</head>
</html>
